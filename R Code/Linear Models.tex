\begin{lstlisting}
#####################
# Linear Models #
#################



# load libraries
library(readxl)
library(shiny)
library(ggplot2)
library(GGally)
library(KFAS)

# upload data
data <- read_excel("Y:/TRICONAT/EMOS/Stage2018/Datasets/RS975_sa.xlsx",
                   sheet="Sheet1")


# combine indicators
data$indicator <- (data$E_1 + data$E_2 + data$E_3 + data$E_4)/4

###############
# Correlation #
###############

correlation.matrix <- cor(data[,c("E_1","E_2","E_3","E_4")])
stargazer(correlation.matrix, title="Correlation Matrix")


Q1_est <- c("period", "E_1", "Var_1", "Z_1", "Var_Z_1")
Q2_est <- c("period", "E_2", "Var_2", "Z_2", "Var_Z_2")
Q3_est <- c("period", "E_3", "Var_3", "Z_3", "Var_Z_3")
Q4_est <- c("period", "E_4", "Var_4", "Z_4", "Var_Z_4")

ggpairs(data[Q1_est])
ggpairs(data[Q2_est])
ggpairs(data[Q3_est])
ggpairs(data[Q4_est])

ggpairs(data[c("GDP", "indicator", "E_1", "E_2", "E_3", "E_4")])

plot(data$GDP, type="o", col = "black")
lines(data$indicator,  col = "blue")



#################
# Linear Models #
#################

#model <- lm(GDP ~ solde_UW, MI027)

model <- lm(GDP ~ E_1, data)

model2 <- lm(GDP ~ E_1 + Var_1 + Z_1 + Var_Z_1, data)

summary(model)

stargazer(model, model2, title="Results", align=TRUE)

# Create the plot
# Change the theme and colour
autoplot(model, which = 1:6, ncol = 2, label.size = 3,
         colour = "steelblue") + theme_bw()





library(midasr)




library(dlm)
library(zoo)
library(dyn)


data_ts = ts(data, start=c(1988,1), frequency=12)

f<-dyn$lm(GDP ~ E_2 + lag(E_2,-1) + lag(E_2,-2) + lag(E_2,-3), data)
summary(f)


library(dynlm)
f<-dynlm(GDP ~ E_2 + L(E_2,-1), data_ts)
summary(f)


# MIDAS
library(midasr)
eq <- lm(GDP ~ mls(E_2, k = 0:3, m = 1) , data_ts)
summary(eq)

plot(eq)

################################
# Linear Autoregressive Models #
################################


library(dynamac)
dynardl(GDP ~ E_2 + E_3, data = data, 
        lags = list("GDP" = c(1:5), "E_2" = 1),
        ec = TRUE, simulate = FALSE)



inf ~ L(inf, 1) + d(u, 1)

dynlm(GDP ~ L(GDP, 1) + L(E_2, 0:1), data=data_ts)












ar.ols(GDP_year ~ E_2, data_ts)






library('ggplot2')
library('forecast')
library('tseries')

# create automatic latex tables
install.packages("stargazer") #Use this to install it, you only need to do it once
library(stargazer)
# stargazer(data_ts, out="descriptive.tex")



e_3 <- data_ts[, "GDP"]
auto.arima(e_3, seasonal=FALSE)


fit2 = arima(deseasonal_cnt, order=c(1,1,0))










library(dyn)
data_ts = ts(data, start=c(1988,1), frequency=12)

model <- dyn$lm( GDP_year ~ lag(GDP_year,-12), data=data)
rlang::last_trace()
lag(GDP_year,-3) 




####################################################################


E_1 <-ts(data$E_1,start=1988,frequency=12)
E_2 <-ts(data$E_2,start=1988,frequency=12)
E_3 <-ts(data$E_3,start=1988,frequency=12)
E_4 <-ts(data$E_4,start=1988,frequency=12)

GDP <- na.omit(data$GDP)
GDP_year <- na.omit(data$GDP_year)

GDP <-ts(GDP,start=1988,frequency=4)
GDP_year <-ts(GDP_year,start=1988,frequency=4)

# Make nice plotssssssssssssssss
plot(GDP_year)

acf(GDP_year)


# model
model <- lm(GDP_year ~ GDP_year_lag1 + E_2 + E_2_lag1 + E_2_lag2, data = data)

summary(model)

f<- dyn$lm(GDP_year~ lag(GDP_year, 1) )
summary(f)

library(dynlm)

f_a<-dynlm(GDP_year~L(GDP_year,1))
summary(f_a)
plot(f_a)






\end{lstlisting}